{% extends 'default/layout/layout.html' %}

{% block title %}
{{ plugin.name }} - Settings
{% endblock %}

{% block plugin_stylesheet %}
<link rel="stylesheet" href="{{ url_for('static', filename='plugins/' + plugin.name + '/css/plugin.css') }}">
{% endblock %}

{% block content %}
<!-- Main -->
<div class="container">
  <form action="/guilds/{{guild.id}}/plugins/{{ plugin.id }}" method="post">
    <h2>
      <nav>
        <ul>
          <li><img src="{{url_for('static', filename='default/img/default-plugin.png')}}"></li>
          <li>{{ plugin.name.title() }}</li>
        </ul>
        <ul>
          <li>
            <label for="switch">
              <input type="checkbox" id="switch" class="plugin-switch" name="{{plugin.id}}" role="switch" value="true"
                {% if plugin.enabled %} checked {% endif %}>
            </label>
          </li>
        </ul>
      </nav>
    </h2>

    <p>{{ plugin.description }}</p>

    <div id="settings">
      <article>
        <header>Reactions role message</header>
        <label for="reaction-role-channel">
          Channel
          <select id="reaction-role-channel" name="reaction-role-channel">
            <option value="-1">Please select a channel...</option>
            {% for channel in guild.get_text_channels() %}
            <option value="{{ channel.id }}" {% if channel.id | string == plugin.get_settings_manager().get('reaction-role-channel') %} selected {% endif %}>
              {{channel.name}}
            </option>
            {% endfor%}
          </select>
          <label for="reaction-role-message">
            Message
            <input type="text" id="reaction-role-message" name="reaction-role-message" placeholder="Messsage"
              value="{{ plugin.get_settings_manager().get('reaction-role-message') }}">
          </label>
          <div class="grid">
            <label for="reaction-emoji">
              Emoji
              <input type="text" id="reaction-emoji" name="reaction-emoji"
                placeholder="Entrer une réaction.." value="{{ plugin.get_settings_manager().get('reaction-emoji') }}">
            </label>
            <label for="reaction-role">
              Role
              <input type="text" id="reaction-role" name="reaction-role"
                placeholder="Entre le nom d'un rôle" value="{{ plugin.get_settings_manager().get('reaction-role') }}">
            </label>
          </div>
      </article>
    </div>

    <div class="grid">
      <div></div>
      <div>
        <input type="submit" value="Save settings" />
      </div>
      <div></div>
    </div>
  </form>
</div>
{% endblock %}

{% block plugin_script %}
<script src="{{ url_for('static', filename='plugins/' + plugin.name.lower() + '/js/plugin.js') }}"></script>
{% endblock %}